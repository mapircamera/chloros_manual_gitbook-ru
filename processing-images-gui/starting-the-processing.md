# Запуск обработки

После импорта изображений, маркировки калибровочных целей и настройки параметров проекта вы можете приступать к обработке. На этой странице приведены инструкции по запуску конвейера обработки Chloros.

## Контрольный список перед обработкой

Прежде чем нажать кнопку «Пуск», убедитесь, что все готово:

* [ ] **Файлы импортированы** — все изображения отображаются в браузере файлов
* [ ] **Целевые изображения отмечены** — в столбце «Цель» отмечены калибровочные изображения
* [ ] **Модели камер обнаружены** — в столбце «Модель камеры» отображаются правильные камеры
* [ ] **Настройки сконфигурированы** — настройки проекта проверены и скорректированы
* [ ] **Индексы выбраны** — добавлены нужные мультиспектральные индексы (при необходимости)
* [ ] **Формат экспорта выбран** — выходной формат, подходящий для вашего рабочего процесса

{% hint style=&quot;info&quot; %}
**Совет**: Перед обработкой просмотрите несколько изображений в файловом браузере, чтобы убедиться, что они загрузились правильно.
{% endhint %}

***

## Запуск обработки

### Найдите кнопку «Пуск»

Кнопка «Пуск/Воспроизведение» находится в верхней панели заголовка Chloros:

* Расположение: в верхней центральной части окна
* Значок: **кнопка «Воспроизведение/Пуск»** <img src="../.gitbook/assets/image (2).png" alt="" data-size="line">
* Состояние: кнопка активна (яркая), когда программа готова к обработке

### Нажмите, чтобы начать

1. Нажмите **кнопку «Воспроизведение/Пуск»** в верхней панели заголовка
2. Обработка начнется немедленно
3. Во время обработки кнопка становится неактивной (серым цветом)
4. Индикатор выполнения обновляется, показывая статус обработки

{% hint style=&quot;success&quot; %}
**Обработка начата**: После нажатия Chloros автоматически выполняет все этапы обработки — обнаружение цели, дебайеринг, калибровку, расчет индекса и экспорт.
{% endhint %}

***

## Понимание режимов обработки

Chloros работает в двух различных режимах обработки в зависимости от вашей лицензии:

### Бесплатный режим (последовательная обработка)

**Доступно для всех пользователей**

**Как это работает:**

* Обрабатывает изображения по одному, последовательно.
* Однопоточная работа.
* Меньшее использование памяти.

**Индикатор выполнения показывает 2 этапа:**

1. **Обнаружение цели** — сканирование для калибровки целей.
2. **Обработка** — применение калибровки и экспорт изображений.

**Время обработки:**

* Значительно медленнее, чем Chloros+ в параллельном режиме
* Подходит для небольших и средних наборов данных (&lt; 200 изображений)

### Режим Chloros+ (параллельная обработка)

**Требуется лицензия Chloros+**

**Как это работает:**

* Одновременная обработка нескольких изображений
* Многопоточная работа (до 16 параллельных процессов)
* Использование нескольких ядер ЦП
* Дополнительное ускорение с помощью графических карт NVIDIA (CUDA)

**Индикатор выполнения показывает 4 этапа:**

1. **Обнаружение** — поиск целей калибровки
2. **Анализ** — изучение метаданных изображения и подготовка конвейера
3. **Калибровка** — применение корректировок и калибровок
4. **Экспорт** — сохранение обработанных изображений и индексов

**Взаимодействие с индикатором выполнения:**

* **Наведите курсор мыши** на индикатор, чтобы увидеть подробную раскрываемую панель с 4 этапами
* **Щелкните** индикатор выполнения, чтобы зафиксировать раскрываемую панель на месте
* **Щелкните еще раз**, чтобы разморозить и скрыть панель

**Время обработки:**

* Значительно быстрее, чем в свободном режиме
* Масштабируется в зависимости от количества ядер процессора
* Ускорение GPU еще больше повышает скорость

{% hint style=&quot;info&quot; %}
**Chloros+ Скорость**: Параллельная обработка может быть в 5-10 раз быстрее, чем последовательный режим для больших наборов данных. Проект из 500 изображений, который занимает 2 часа в бесплатном режиме, может быть завершен за 15-20 минут с Chloros+.
{% endhint %}

***

## Что происходит во время обработки

### Этап 1: Обнаружение целей

**Что делает Chloros:**

* Сканирует помеченные целевые изображения (или все изображения, если ни одно не помечено)
* Идентифицирует 4 калибровочные панели в каждой цели
* Извлекает значения отражения из панелей цели
* Записывает временные метки цели для планирования калибровки

**Продолжительность:** 1-30 секунд (с отмеченными целями), 5-30+ минут (без отметок)

### Этап 2: Дебайеринг (преобразование RAW)

**Что делает Chloros:**

* Конвертирует данные RAW-матрицы Байера в полные изображения RGB
* Применяет высококачественный алгоритм демозаикирования
* Сохраняет максимальное качество и детали изображения

**Продолжительность:** зависит от количества изображений и скорости процессора

### Этап 3: Калибровка

**Что делает Chloros:**

* **Коррекция виньетирования**: устраняет затемнение объектива по краям
* **Калибровка отражательной способности**: нормализует с использованием целевых значений отражательной способности
* Применяет коррекции ко всем диапазонам/каналам
* Использует соответствующую калибровочную цель для каждого изображения на основе временной метки

**Продолжительность:** большая часть времени обработки

### Этап 4: Расчет индекса

**Что делает Chloros:**

* Рассчитывает настроенные мультиспектральные индексы (NDVI, NDRE и т. д.)
* Применяет математические операции к калиброванным изображениям
* Генерирует индексные изображения для каждого выбранного индекса

**Продолжительность:** несколько секунд на каждое изображение

### Этап 5: Экспорт

**Что делает Chloros:**

* Сохраняет калиброванные изображения в выбранном формате
* Экспортирует индексные изображения с настроенными цветами LUT
* Запись файлов в подпапки модели камеры
* Сохранение исходных имен файлов с суффиксами

**Продолжительность:** зависит от формата экспорта и размера файла

***

## Поведение при обработке

### Автоматический конвейер обработки

После запуска весь конвейер работает автоматически:

* Взаимодействие с пользователем не требуется
* Все настроенные шаги выполняются последовательно
* Обновления прогресса отображаются в режиме реального времени

### Использование компьютера во время обработки

**Свободный режим:**

* Относительно низкое использование ЦП (однопоточный)
* Компьютер остается отзывчивым для других задач
* Безопасно минимизировать Chloros и работать в других приложениях

**Chloros+ Параллельный режим:**

* Высокое использование ЦП (многопоточное, до 16 ядер)
* С ускорением GPU: высокое использование GPU
* Компьютер может быть менее отзывчивым во время обработки
* Избегайте запуска других задач, интенсивно использующих ЦП

{% hint style=&quot;warning&quot; %}
**Совет по производительности**: для достижения максимальной производительности Chloros+ закройте другие приложения и позвольте Chloros использовать все системные ресурсы.
{% endhint %}

### Обработку нельзя приостановить

**Важные ограничения:**

* После запуска обработку нельзя приостановить.
* Вы можете отменить обработку, но прогресс будет потерян.
* Частичные результаты не сохраняются.
* В случае отмены необходимо начать сначала.

**Совет по планированию:** для очень больших проектов рассмотрите возможность обработки партиями или использования CLI для лучшего контроля.

***

## Мониторинг обработки

Во время обработки вы можете:

* **Смотреть индикатор прогресса** — просматривать общий процент завершения.
* **Просматривать текущий этап** — обнаружение, анализ, калибровка или экспорт.
* **Проверять вкладку журнала** — просматривать подробные сообщения и предупреждения об обработке.
* **Предварительно просматривать готовые изображения** — некоторые экспортные файлы могут появляться во время обработки.

Подробную информацию о мониторинге см. в разделе [Мониторинг обработки](monitoring-the-processing.md).

***

## Отмена обработки

Если вам нужно остановить обработку:

### Как отменить

1. Найдите **кнопку «Стоп/Отмена»** (заменяет кнопку «Пуск» во время обработки)
2. Нажмите кнопку «Стоп»
3. Обработка немедленно остановится
4. Частичные результаты будут отброшены

### Когда отменять

**Веские причины для отмены:**

* Вы обнаружили, что были использованы неверные настройки
* Вы забыли отметить целевые изображения
* Были импортированы неверные изображения
* Система работает слишком медленно или не отвечает

**После отмены:**

* Просмотрите и исправьте все проблемы
* Отрегулируйте настройки по мере необходимости
* Перезапустите обработку с самого начала
* Для обеспечения максимальной чистоты полностью закройте Chloros и перезапустите

{% hint style=&quot;warning&quot; %}
**Нет частичных результатов**: отмена отбрасывает весь прогресс. Chloros не сохраняет частично обработанные изображения.
{% endhint %}

***

## Оценка времени обработки

Фактическое время обработки сильно зависит от следующих факторов:

* Количество изображений
* Разрешение изображений
* Формат входных данных: RAW или JPG
* Режим обработки (Free или Chloros+)
* Скорости процессора и количества ядер
* Наличия графического процессора (только Chloros+)
* Количества индексов для вычисления
* Сложности формата экспорта

### Приблизительные оценки (Chloros+, изображения 12 Мп, современный процессор)

| Количество изображений | Бесплатный режим | Chloros+ (CPU) | Chloros+ (GPU) |
| ----------- | --------- | -------------- | -------------- |
| 50 изображений   | 15-20 мин | 5-8 мин        | 3-5 мин        |
| 100 изображений  | 30-40 мин | 10-15 мин      | 5-8 мин        |
| 200 изображений  | 1-1,5 ч | 20-30 мин      | 10-15 мин      |
| 500 изображений  | 2-3 часа   | 45-60 мин      | 20-30 мин      |
| 1000 изображений | 4-6 часов   | 1,5-2 часа      | 40-60 мин      |

{% hint style=&quot;info&quot; %}
**Первый запуск**: первоначальная обработка может занять больше времени, поскольку Chloros создает кэши и профили. Последующая обработка аналогичных наборов данных будет проходить быстрее.
{% endhint %}

***

## Распространенные проблемы при запуске

### Кнопка «Пуск» отключена (серый цвет)

**Возможные причины:**

* Не импортированы изображения
* Бэкэнд не полностью запущен
* Предыдущая обработка все еще выполняется
* Проект не полностью загружен

**Решения:**

1. Подождите, пока бэкэнд полностью инициализируется (проверьте значок в главном меню)
2. Убедитесь, что изображения импортированы в файловом браузере
3. Перезапустите Chloros, если кнопка остается отключенной
4. Проверьте журнал отладки на наличие сообщений об ошибках

### Обработка запускается, но сразу же завершается с ошибкой

**Возможные причины:**

* В проекте нет действительных изображений
* Поврежденные файлы изображений
* Недостаточно места на диске
* Недостаточно памяти (RAM)

**Решения:**

1. Проверьте журнал отладки <img src="../.gitbook/assets/icon_log.JPG" alt="" data-size="line"> на наличие сообщений об ошибках
2. Проверьте доступное место на диске
3. Попробуйте обработать меньший набор изображений
4. Убедитесь, что изображения не повреждены

### Предупреждение «Цели не обнаружены»

**Возможные причины:**

* Забыли отметить целевые изображения
* Целевые изображения не содержат видимых целей
* Настройки обнаружения целей слишком строгие

**Решения:**

1. Просмотрите [Выбор целевых изображений](choosing-target-images.md)
2. Отметьте соответствующие изображения в столбце «Цель»
3. Убедитесь, что цели видны на отмеченных изображениях
4. При необходимости настройте параметры обнаружения целей

***

## Советы для успешной обработки

### Перед началом

1. **Сначала протестируйте на небольшом поднаборе** — обработайте 10–20 изображений, чтобы проверить настройки.
2. **Проверьте доступное место на диске** — убедитесь, что свободного места в 2–3 раза больше размера набора данных.
3. **Закройте ненужные приложения** — освободите системные ресурсы.
4. **Проверьте целевые изображения** — просмотрите отмеченные цели, чтобы убедиться в их качестве.
5. **Сохраните проект** — проект сохраняется автоматически, но рекомендуется сохранять его вручную.

### Во время обработки

1. **Избегайте перехода системы в спящий режим** — отключите режимы энергосбережения.
2. **Держите Chloros на переднем плане** — или, по крайней мере, видимым в панели задач.
3. **Периодически проверяйте ход выполнения** — проверяйте наличие предупреждений или ошибок.
4. **Не загружайте другие тяжелые приложения** — особенно в параллельном режиме Chloros+.

### Chloros+ GPU Acceleration

При использовании ускорения NVIDIA GPU:

1. Обновите драйверы NVIDIA до последней версии.
2. Убедитесь, что GPU имеет 4 ГБ+ VRAM.
3. Закройте приложения, интенсивно использующие GPU (игры, редактирование видео).
4. Контролируйте температуру GPU (обеспечьте адекватное охлаждение).

***

## Следующие шаги

После начала обработки:

1. **Контролируйте ход выполнения** — см. [Контроль обработки](monitoring-the-processing.md).
2. **Дождитесь завершения** — обработка выполняется автоматически.
3. **Просмотрите результаты** — см. [Завершение обработки](finishing-the-processing.md).

Информацию о том, что делать во время обработки, см. в разделе [Мониторинг обработки](monitoring-the-processing.md).
